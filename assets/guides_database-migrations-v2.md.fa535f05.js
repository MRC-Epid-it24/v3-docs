import{_ as a,c as e,o as t,a as s}from"./app.309a8d3d.js";const f=JSON.parse('{"title":"Database migrations V2","description":"","frontmatter":{},"headers":[{"level":2,"title":"Database configurations","slug":"database-configurations","link":"#database-configurations","children":[]},{"level":2,"title":"Running migrations","slug":"running-migrations","link":"#running-migrations","children":[]}],"relativePath":"guides/database-migrations-v2.md"}'),n={name:"guides/database-migrations-v2.md"},o=s(`<h1 id="database-migrations-v2" tabindex="-1">Database migrations V2 <a class="header-anchor" href="#database-migrations-v2" aria-hidden="true">#</a></h1><p>Starting from API v2 Intake24 uses Flyway to handle database migrations.</p><h2 id="database-configurations" tabindex="-1">Database configurations <a class="header-anchor" href="#database-configurations" aria-hidden="true">#</a></h2><p>Copy <code>DatabaseMigrations/src/main/resources/databases.example.conf</code> to a local directory outside of the project source tree.</p><p>Create a single copy of the file per database instance (e.g., <code>dev-db.conf</code> for local development databases, <code>prod-db.conf</code> for production databases) and edit the database connection information.</p><h2 id="running-migrations" tabindex="-1">Running migrations <a class="header-anchor" href="#running-migrations" aria-hidden="true">#</a></h2><p>The easiest way to run the migration tool is to use the Gradle task.</p><p>To apply system database migrations, from the run the following command from the api-v2 project root:</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">gradle -Dconfig.file=/path/to/database.conf :DatabaseMigration:migrateSystem</span></span>
<span class="line"></span></code></pre></div><p>To apply food database migrations, from the run the following command from the api-v2 project root:</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">gradle -Dconfig.file=/path/to/database.conf :DatabaseMigration:migrateFoods</span></span>
<span class="line"></span></code></pre></div>`,11),i=[o];function r(d,c,l,p,g,h){return t(),e("div",null,i)}const u=a(n,[["render",r]]);export{f as __pageData,u as default};
